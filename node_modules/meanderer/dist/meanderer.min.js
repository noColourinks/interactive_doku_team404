!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t=t||self).Meanderer=n()}(this,function(){"use strict";function E(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],e=!0,i=!1,a=void 0;try{for(var o,u=t[Symbol.iterator]();!(e=(o=u.next()).done)&&(r.push(o.value),!n||r.length!==n);e=!0);}catch(t){i=!0,a=t}finally{try{e||null==u.return||u.return()}finally{if(i)throw a}}return r}(t,n)||r(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||r(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,n){if(t){if("string"==typeof t)return i(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(t,n):void 0}}function i(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,e=new Array(n);r<n;r++)e[r]=t[r];return e}var w=Math.PI,f=2*w,x=1e-6,g=f-x;function t(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function j(){return new t}function T(t){return function(){return t}}function n(t){this._context=t}function q(t){return new n(t)}function $(t){return t[0]}function R(t){return t[1]}function a(t,n){return t<n?-1:n<t?1:n<=t?0:NaN}t.prototype=j.prototype={constructor:t,moveTo:function(t,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,n){this._+="L"+(this._x1=+t)+","+(this._y1=+n)},quadraticCurveTo:function(t,n,r,e){this._+="Q"+ +t+","+ +n+","+(this._x1=+r)+","+(this._y1=+e)},bezierCurveTo:function(t,n,r,e,i,a){this._+="C"+ +t+","+ +n+","+ +r+","+ +e+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(t,n,r,e,i){t=+t,n=+n,r=+r,e=+e,i=+i;var a=this._x1,o=this._y1,u=r-t,s=e-n,h=a-t,l=o-n,c=h*h+l*l;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=n);else if(x<c)if(Math.abs(l*u-s*h)>x&&i){var f=r-a,g=e-o,p=u*u+s*s,d=f*f+g*g,m=Math.sqrt(p),y=Math.sqrt(c),v=i*Math.tan((w-Math.acos((p+c-d)/(2*m*y)))/2),b=v/y,M=v/m;Math.abs(b-1)>x&&(this._+="L"+(t+b*h)+","+(n+b*l)),this._+="A"+i+","+i+",0,0,"+ +(h*g<l*f)+","+(this._x1=t+M*u)+","+(this._y1=n+M*s)}else this._+="L"+(this._x1=t)+","+(this._y1=n);else;},arc:function(t,n,r,e,i,a){t=+t,n=+n,a=!!a;var o=(r=+r)*Math.cos(e),u=r*Math.sin(e),s=t+o,h=n+u,l=1^a,c=a?e-i:i-e;if(r<0)throw new Error("negative radius: "+r);null===this._x1?this._+="M"+s+","+h:(Math.abs(this._x1-s)>x||Math.abs(this._y1-h)>x)&&(this._+="L"+s+","+h),r&&(c<0&&(c=c%f+f),g<c?this._+="A"+r+","+r+",0,1,"+l+","+(t-o)+","+(n-u)+"A"+r+","+r+",0,1,"+l+","+(this._x1=s)+","+(this._y1=h):x<c&&(this._+="A"+r+","+r+",0,"+ +(w<=c)+","+l+","+(this._x1=t+r*Math.cos(i))+","+(this._y1=n+r*Math.sin(i))))},rect:function(t,n,r,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)+"h"+ +r+"v"+ +e+"h"+-r+"Z"},toString:function(){return this._}},n.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n)}}};var o,u,s=(1===(o=a).length&&(u=o,o=function(t,n){return a(u(t),n)}),{left:function(t,n,r,e){for(null==r&&(r=0),null==e&&(e=t.length);r<e;){var i=r+e>>>1;o(t[i],n)<0?r=1+i:e=i}return r},right:function(t,n,r,e){for(null==r&&(r=0),null==e&&(e=t.length);r<e;){var i=r+e>>>1;0<o(t[i],n)?e=i:r=1+i}return r}}).right,v=Math.sqrt(50),b=Math.sqrt(10),M=Math.sqrt(2);function h(t,n,r){var e=(n-t)/Math.max(0,r),i=Math.floor(Math.log(e)/Math.LN10),a=e/Math.pow(10,i);return 0<=i?(v<=a?10:b<=a?5:M<=a?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(v<=a?10:b<=a?5:M<=a?2:1)}var l="$";function c(){}c.prototype={constructor:c,has:function(t){return l+t in this},get:function(t){return this[l+t]},set:function(t,n){return this[l+t]=n,this},remove:function(t){var n=l+t;return n in this&&delete this[n]},clear:function(){for(var t in this)t[0]===l&&delete this[t]},keys:function(){var t=[];for(var n in this)n[0]===l&&t.push(n.slice(1));return t},values:function(){var t=[];for(var n in this)n[0]===l&&t.push(this[n]);return t},entries:function(){var t=[];for(var n in this)n[0]===l&&t.push({key:n.slice(1),value:this[n]});return t},size:function(){var t=0;for(var n in this)n[0]===l&&++t;return t},empty:function(){for(var t in this)if(t[0]===l)return!1;return!0},each:function(t){for(var n in this)n[0]===l&&t(this[n],n.slice(1),this)}};var p=Array.prototype,d=p.map,m=p.slice;function y(t,n,r){t.prototype=n.prototype=r,r.constructor=t}function _(t,n){var r=Object.create(t.prototype);for(var e in n)r[e]=n[e];return r}function N(){}var k=1/.7,A="\\s*([+-]?\\d+)\\s*",S="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",P="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",L=/^#([0-9a-f]{3,8})$/,z=new RegExp("^rgb\\("+[A,A,A]+"\\)$"),I=new RegExp("^rgb\\("+[P,P,P]+"\\)$"),C=new RegExp("^rgba\\("+[A,A,A,S]+"\\)$"),O=new RegExp("^rgba\\("+[P,P,P,S]+"\\)$"),H=new RegExp("^hsl\\("+[S,P,P]+"\\)$"),D=new RegExp("^hsla\\("+[S,P,P,S]+"\\)$"),F={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Z(){return this.rgb().formatHex()}function U(){return this.rgb().formatRgb()}function V(t){var n,r;return t=(t+"").trim().toLowerCase(),(n=L.exec(t))?(r=n[1].length,n=parseInt(n[1],16),6===r?X(n):3===r?new Q(n>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1):8===r?new Q(n>>24&255,n>>16&255,n>>8&255,(255&n)/255):4===r?new Q(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|240&n,((15&n)<<4|15&n)/255):null):(n=z.exec(t))?new Q(n[1],n[2],n[3],1):(n=I.exec(t))?new Q(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=C.exec(t))?B(n[1],n[2],n[3],n[4]):(n=O.exec(t))?B(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=H.exec(t))?W(n[1],n[2]/100,n[3]/100,1):(n=D.exec(t))?W(n[1],n[2]/100,n[3]/100,n[4]):F.hasOwnProperty(t)?X(F[t]):"transparent"===t?new Q(NaN,NaN,NaN,0):null}function X(t){return new Q(t>>16&255,t>>8&255,255&t,1)}function B(t,n,r,e){return e<=0&&(t=n=r=NaN),new Q(t,n,r,e)}function G(t,n,r,e){return 1===arguments.length?((i=t)instanceof N||(i=V(i)),i?new Q((i=i.rgb()).r,i.g,i.b,i.opacity):new Q):new Q(t,n,r,null==e?1:e);var i}function Q(t,n,r,e){this.r=+t,this.g=+n,this.b=+r,this.opacity=+e}function Y(){return"#"+K(this.r)+K(this.g)+K(this.b)}function J(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function K(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function W(t,n,r,e){return e<=0?t=n=r=NaN:r<=0||1<=r?t=n=NaN:n<=0&&(t=NaN),new nt(t,n,r,e)}function tt(t){if(t instanceof nt)return new nt(t.h,t.s,t.l,t.opacity);if(t instanceof N||(t=V(t)),!t)return new nt;if(t instanceof nt)return t;var n=(t=t.rgb()).r/255,r=t.g/255,e=t.b/255,i=Math.min(n,r,e),a=Math.max(n,r,e),o=NaN,u=a-i,s=(a+i)/2;return u?(o=n===a?(r-e)/u+6*(r<e):r===a?(e-n)/u+2:(n-r)/u+4,u/=s<.5?a+i:2-a-i,o*=60):u=0<s&&s<1?0:o,new nt(o,u,s,t.opacity)}function nt(t,n,r,e){this.h=+t,this.s=+n,this.l=+r,this.opacity=+e}function rt(t,n,r){return 255*(t<60?n+(r-n)*t/60:t<180?r:t<240?n+(r-n)*(240-t)/60:n)}function et(t){return function(){return t}}function it(a){return 1==(a=+a)?at:function(t,n){return n-t?(r=t,e=n,i=a,r=Math.pow(r,i),e=Math.pow(e,i)-r,i=1/i,function(t){return Math.pow(r+t*e,i)}):et(isNaN(t)?n:t);var r,e,i}}function at(t,n){var r,e,i=n-t;return i?(r=t,e=i,function(t){return r+t*e}):et(isNaN(t)?n:t)}y(N,V,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Z,formatHex:Z,formatHsl:function(){return tt(this).formatHsl()},formatRgb:U,toString:U}),y(Q,G,_(N,{brighter:function(t){return t=null==t?k:Math.pow(k,t),new Q(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Q(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Y,formatHex:Y,formatRgb:J,toString:J})),y(nt,function(t,n,r,e){return 1===arguments.length?tt(t):new nt(t,n,r,null==e?1:e)},_(N,{brighter:function(t){return t=null==t?k:Math.pow(k,t),new nt(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new nt(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),n=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,e=r+(r<.5?r:1-r)*n,i=2*r-e;return new Q(rt(240<=t?t-240:120+t,i,e),rt(t,i,e),rt(t<120?240+t:t-120,i,e),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var ot=function t(n){var o=it(n);function r(n,t){var r=o((n=G(n)).r,(t=G(t)).r),e=o(n.g,t.g),i=o(n.b,t.b),a=at(n.opacity,t.opacity);return function(t){return n.r=r(t),n.g=e(t),n.b=i(t),n.opacity=a(t),n+""}}return r.gamma=t,r}(1);function ut(n,r){return n=+n,r=+r,function(t){return n*(1-t)+r*t}}var st=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ht=new RegExp(st.source,"g");function lt(t,e){var n,r,i,a,o,u=st.lastIndex=ht.lastIndex=0,s=-1,h=[],l=[];for(t+="",e+="";(n=st.exec(t))&&(r=ht.exec(e));)(i=r.index)>u&&(i=e.slice(u,i),h[s]?h[s]+=i:h[++s]=i),(n=n[0])===(r=r[0])?h[s]?h[s]+=r:h[++s]=r:(h[++s]=null,l.push({i:s,x:ut(n,r)})),u=ht.lastIndex;return u<e.length&&(i=e.slice(u),h[s]?h[s]+=i:h[++s]=i),h.length<2?l[0]?(o=l[0].x,function(t){return o(t)+""}):(a=e,function(){return a}):(e=l.length,function(t){for(var n,r=0;r<e;++r)h[(n=l[r]).i]=n.x(t);return h.join("")})}function ct(t,n){var r,e,i=typeof n;return null==n||"boolean"==i?et(n):("number"==i?ut:"string"==i?(r=V(n))?(n=r,ot):lt:n instanceof V?ot:n instanceof Date?function(n,r){var e=new Date;return n=+n,r=+r,function(t){return e.setTime(n*(1-t)+r*t),e}}:(e=n,!ArrayBuffer.isView(e)||e instanceof DataView?Array.isArray(n)?function(t,n){var r,e=n?n.length:0,i=t?Math.min(e,t.length):0,a=new Array(i),o=new Array(e);for(r=0;r<i;++r)a[r]=ct(t[r],n[r]);for(;r<e;++r)o[r]=n[r];return function(t){for(r=0;r<i;++r)o[r]=a[r](t);return o}}:"function"!=typeof n.valueOf&&"function"!=typeof n.toString||isNaN(n)?function(t,n){var r,e={},i={};for(r in null!==t&&"object"==typeof t||(t={}),null!==n&&"object"==typeof n||(n={}),n)r in t?e[r]=ct(t[r],n[r]):i[r]=n[r];return function(t){for(r in e)i[r]=e[r](t);return i}}:ut:function(n,r){r=r||[];var e,i=n?Math.min(r.length,n.length):0,a=r.slice();return function(t){for(e=0;e<i;++e)a[e]=n[e]*(1-t)+r[e]*t;return a}}))(t,n)}function ft(n,r){return n=+n,r=+r,function(t){return Math.round(n*(1-t)+r*t)}}function gt(t){return+t}var pt=[0,1];function dt(t){return t}function mt(n,r){return(r-=n=+n)?function(t){return(t-n)/r}:(t=isNaN(r)?NaN:.5,function(){return t});var t}function yt(t){var n,r=t[0],e=t[t.length-1];return e<r&&(n=r,r=e,e=n),function(t){return Math.max(r,Math.min(e,t))}}function vt(t,n,r){var e=t[0],i=t[1],a=n[0],o=n[1];return a=i<e?(e=mt(i,e),r(o,a)):(e=mt(e,i),r(a,o)),function(t){return a(e(t))}}function bt(r,t,n){var e=Math.min(r.length,t.length)-1,i=new Array(e),a=new Array(e),o=-1;for(r[e]<r[0]&&(r=r.slice().reverse(),t=t.slice().reverse());++o<e;)i[o]=mt(r[o],r[o+1]),a[o]=n(t[o],t[o+1]);return function(t){var n=s(r,t,1,e)-1;return a[n](i[n](t))}}function Mt(t,n){return c=l=pt,f=ct,g=dt,e.invert=function(t){return g(a((h=h||u(c,l.map(i),ut))(t)))},e.domain=function(t){return arguments.length?(l=d.call(t,gt),g===dt||(g=yt(l)),r()):l.slice()},e.range=function(t){return arguments.length?(c=m.call(t),r()):c.slice()},e.rangeRound=function(t){return c=m.call(t),f=ft,r()},e.clamp=function(t){return arguments.length?(g=t?yt(l):dt,e):g!==dt},e.interpolate=function(t){return arguments.length?(f=t,r()):f},e.unknown=function(t){return arguments.length?(o=t,e):o},function(t,n){return i=t,a=n,r()}(t,n);function r(){return u=2<Math.min(l.length,c.length)?bt:vt,s=h=null,e}function e(t){return isNaN(t=+t)?o:(s=s||u(l.map(i),c,f))(i(g(t)))}var i,a,o,u,s,h,l,c,f,g}function wt(t,n){if((r=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var r,e=t.slice(0,r);return[1<e.length?e[0]+e.slice(2):e,+t.slice(r+1)]}function xt(t){return(t=wt(Math.abs(t)))?t[1]:NaN}var _t,Nt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function kt(t){if(!(n=Nt.exec(t)))throw new Error("invalid format: "+t);var n;return new At({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}function At(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function St(t,n){var r=wt(t,n);if(!r)return t+"";var e=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+e:e.length>i+1?e.slice(0,i+1)+"."+e.slice(i+1):e+new Array(i-e.length+2).join("0")}kt.prototype=At.prototype,At.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Et={"%":function(t,n){return(100*t).toFixed(n)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,n){return t.toExponential(n)},f:function(t,n){return t.toFixed(n)},g:function(t,n){return t.toPrecision(n)},o:function(t){return Math.round(t).toString(8)},p:function(t,n){return St(100*t,n)},r:St,s:function(t,n){var r=wt(t,n);if(!r)return t+"";var e=r[0],i=r[1],a=i-(_t=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=e.length;return a===o?e:o<a?e+new Array(a-o+1).join("0"):0<a?e.slice(0,a)+"."+e.slice(a):"0."+new Array(1-a).join("0")+wt(t,Math.max(0,n+a-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function jt(t){return t}var Tt,qt,$t,Rt=Array.prototype.map,Pt=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Lt(t){var n,u,s,x=void 0===t.grouping||void 0===t.thousands?jt:(u=Rt.call(t.grouping,Number),s=t.thousands+"",function(t,n){for(var r=t.length,e=[],i=0,a=u[0],o=0;0<r&&0<a&&(n<o+a+1&&(a=Math.max(1,n-o)),e.push(t.substring(r-=a,r+a)),!((o+=a+1)>n));)a=u[i=(i+1)%u.length];return e.reverse().join(s)}),e=void 0===t.currency?"":t.currency[0]+"",i=void 0===t.currency?"":t.currency[1]+"",_=void 0===t.decimal?".":t.decimal+"",N=void 0===t.numerals?jt:(n=Rt.call(t.numerals,String),function(t){return t.replace(/[0-9]/g,function(t){return n[+t]})}),a=void 0===t.percent?"%":t.percent+"",k=void 0===t.minus?"-":t.minus+"",A=void 0===t.nan?"NaN":t.nan+"";function o(t){var h=(t=kt(t)).fill,l=t.align,c=t.sign,n=t.symbol,f=t.zero,g=t.width,p=t.comma,d=t.precision,m=t.trim,y=t.type;"n"===y?(p=!0,y="g"):Et[y]||(void 0===d&&(d=12),m=!0,y="g"),(f||"0"===h&&"="===l)&&(f=!0,h="0",l="=");var v="$"===n?e:"#"===n&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",b="$"===n?i:/[%p]/.test(y)?a:"",M=Et[y],w=/[defgprs%]/.test(y);function r(t){var n,r,e,i=v,a=b;if("c"===y)a=M(t)+a,t="";else{var o=(t=+t)<0;if(t=isNaN(t)?A:M(Math.abs(t),d),m&&(t=function(t){t:for(var n,r=t.length,e=1,i=-1;e<r;++e)switch(t[e]){case".":i=n=e;break;case"0":0===i&&(i=e),n=e;break;default:if(!+t[e])break t;0<i&&(i=0)}return 0<i?t.slice(0,i)+t.slice(n+1):t}(t)),o&&0==+t&&(o=!1),i=(o?"("===c?c:k:"-"===c||"("===c?"":c)+i,a=("s"===y?Pt[8+_t/3]:"")+a+(o&&"("===c?")":""),w)for(n=-1,r=t.length;++n<r;)if((e=t.charCodeAt(n))<48||57<e){a=(46===e?_+t.slice(n+1):t.slice(n))+a,t=t.slice(0,n);break}}p&&!f&&(t=x(t,1/0));var u=i.length+t.length+a.length,s=u<g?new Array(g-u+1).join(h):"";switch(p&&f&&(t=x(s+t,s.length?g-a.length:1/0),s=""),l){case"<":t=i+t+a+s;break;case"=":t=i+s+t+a;break;case"^":t=s.slice(0,u=s.length>>1)+i+t+a+s.slice(u);break;default:t=s+i+t+a}return N(t)}return d=void 0===d?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,d)):Math.max(0,Math.min(20,d)),r.toString=function(){return t+""},r}return{format:o,formatPrefix:function(t,n){var r=o(((t=kt(t)).type="f",t)),e=3*Math.max(-8,Math.min(8,Math.floor(xt(n)/3))),i=Math.pow(10,-e),a=Pt[8+e/3];return function(t){return r(i*t)+a}}}}function zt(t,n,r,e){var i,a,o,u,s,h,l,c,f,g,p,d,m=(a=t,o=n,u=r,s=Math.abs(o-a)/Math.max(0,u),h=Math.pow(10,Math.floor(Math.log(s)/Math.LN10)),v<=(l=s/h)?h*=10:b<=l?h*=5:M<=l&&(h*=2),o<a?-h:h);switch((e=kt(null==e?",f":e)).type){case"s":var y=Math.max(Math.abs(t),Math.abs(n));return null!=e.precision||isNaN((p=m,d=y,i=Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(xt(d)/3)))-xt(Math.abs(p)))))||(e.precision=i),$t(e,y);case"":case"e":case"g":case"p":case"r":null!=e.precision||isNaN((f=m,g=Math.max(Math.abs(t),Math.abs(n)),f=Math.abs(f),g=Math.abs(g)-f,i=Math.max(0,xt(g)-xt(f))+1))||(e.precision=i-("e"===e.type));break;case"f":case"%":null!=e.precision||isNaN((c=m,i=Math.max(0,-xt(Math.abs(c)))))||(e.precision=i-2*("%"===e.type))}return qt(e)}function It(u){var s=u.domain;return u.ticks=function(t){var n=s();return function(t,n,r){var e,i,a,o,u=-1;if(r=+r,(t=+t)===(n=+n)&&0<r)return[t];if((e=n<t)&&(i=t,t=n,n=i),0===(o=h(t,n,r))||!isFinite(o))return[];if(0<o)for(t=Math.ceil(t/o),n=Math.floor(n/o),a=new Array(i=Math.ceil(n-t+1));++u<i;)a[u]=(t+u)*o;else for(t=Math.floor(t*o),n=Math.ceil(n*o),a=new Array(i=Math.ceil(t-n+1));++u<i;)a[u]=(t-u)/o;return e&&a.reverse(),a}(n[0],n[n.length-1],null==t?10:t)},u.tickFormat=function(t,n){var r=s();return zt(r[0],r[r.length-1],null==t?10:t,n)},u.nice=function(t){null==t&&(t=10);var n,r=s(),e=0,i=r.length-1,a=r[e],o=r[i];return o<a&&(n=a,a=o,o=n,n=e,e=i,i=n),0<(n=h(a,o,t))?n=h(a=Math.floor(a/n)*n,o=Math.ceil(o/n)*n,t):n<0&&(n=h(a=Math.ceil(a*n)/n,o=Math.floor(o*n)/n,t)),0<n?(r[e]=Math.floor(a/n)*n,r[i]=Math.ceil(o/n)*n,s(r)):n<0&&(r[e]=Math.ceil(a*n)/n,r[i]=Math.floor(o*n)/n,s(r)),u},u}function Ct(){var n=Mt(dt,dt);return n.copy=function(){return t=n,Ct().domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown());var t},function(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t)}return this}.apply(n,arguments),It(n)}Tt=Lt({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),qt=Tt.format,$t=Tt.formatPrefix;var Ot=function(){var S=this;this.getMaximums=function(t){var n=t.map(function(t){return t[0]}),r=t.map(function(t){return t[1]});return[Math.max.apply(Math,e(n)),Math.max.apply(Math,e(r))]},this.getRatios=function(t,n,r){return[t[0]/n,t[1]/r]},this.convertPathToData=function(t){var n=document.createElement("div");n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">\n                              <path d="'.concat(t,'"/>\n                            </svg>');for(var r=n.querySelector("path"),e=[],i=0;i<r.getTotalLength();i++){var a=r.getPointAtLength(i),o=a.x,u=a.y;e.push([o,u])}return e},this.generatePath=function(t,n){var r=S.height,e=S.width,i=S.aspect_ratio,a=S.path_data,o=E(S.maximums,2),u=o[0],s=o[1],h=E(S.range_ratios,2),l=h[0],c=h[1],f=S.threshold,g=[0,0],p=t/n;if(Math.abs(p-i)>f)if(e<r){var d=(r-e)/r;g[0]=d*t/2}else{var m=(e-r)/e;g[1]=m*n/2}var y,v,b,M,w,x,_=Ct().domain([0,u]).range([g[0],t*l-g[0]]),N=Ct().domain([0,s]).range([g[1],n*c-g[1]]),k=a.map(function(t){return[_(t[0]),N(t[1])]});return y=$,v=R,b=T(!0),w=q,x=M=null,A.x=function(t){return arguments.length?(y="function"==typeof t?t:T(+t),A):y},A.y=function(t){return arguments.length?(v="function"==typeof t?t:T(+t),A):v},A.defined=function(t){return arguments.length?(b="function"==typeof t?t:T(!!t),A):b},A.curve=function(t){return arguments.length?(w=t,null!=M&&(x=w(M)),A):w},A.context=function(t){return arguments.length?(null==t?M=x=null:x=w(M=t),A):M},A(k);function A(t){var n,r,e,i=t.length,a=!1;for(null==M&&(x=w(e=j())),n=0;n<=i;++n)!(n<i&&b(r=t[n],n,t))===a&&((a=!a)?x.lineStart():x.lineEnd()),a&&x.point(+y(r,n,t),+v(r,n,t));if(e)return x=null,e+""||null}}};return function t(n){var r=n.height,e=n.path,i=n.threshold,a=void 0===i?.2:i,o=n.width;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),Ot.call(this),this.height=r,this.path=e,this.threshold=a,this.width=o,this.aspect_ratio=o/r,this.path_data=this.convertPathToData(e),this.maximums=this.getMaximums(this.path_data),this.range_ratios=this.getRatios(this.maximums,o,r)}});
